<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <title>Lisää kysely</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <script th:inline="javascript">
        function addField(){
            let rowIndex = document.getElementById('kysymykset').getElementsByTagName('tr').length;
            let input = document.createElement('input');
            input.id = "kysymykset" + rowIndex + ".kysymys";
            input.setAttribute("name", "kysymykset[" + rowIndex + "].kysymys");
            input.setAttribute("type", "text");
            let tr = document.getElementById("kysymykset").insertRow(-1);
            let td = document.createElement('td');
            td.appendChild(input);
            tr.appendChild(td);
        }
    </script>
</head>

<body>
    <h1>Lisää kysely</h1>
    <form action="#" th:action="@{/save}" th:object=${kysely} method="post">
        <p>Kyselyn nimi:</p><input type="text" th:field="${kysely.nimi}" />
        <input type="submit" value="Submit" /> <input type="reset" value="Reset" />
        <h2>Kysymykset</h2>
        <table id="kysymykset">
            <tr th:each="kysymys, stat : ${kysymykset}">
                <td><input type="text" th:field="*{kysymykset[__${stat.index}__].kysymys}" /></td>
            </tr>
        </table>
        <button type="button" onClick="addField()">lisää</button>
    </form>

</body>

</html>